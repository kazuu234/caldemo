# PWA（Progressive Web App）セットアップガイド

このアプリはPWA（Progressive Web App）として動作し、ホーム画面に追加することで、ネイティブアプリのような体験を提供します。

## 機能

### 1. 通知機能
- 他の人が新しい予定を追加すると、デスクトップ/モバイル通知が表示されます
- 合流募集が投稿されたときにも通知されます

### 2. バッジ機能（対応ブラウザのみ）
- **Android Chrome、Edge等で対応**
- アプリアイコンに赤丸のバッジが表示され、未読の予定数が表示されます
- 「みんなの予定」タブを開くと、未読数がクリアされます
- **注意**: iOS Safariでは現在バッジ表示に制限があります

### 3. オフライン対応（今後の実装予定）
- Service Workerを使用したオフライン対応

## ホーム画面への追加方法

### iOS（Safari）
1. Safariでアプリを開く
2. 共有ボタン（四角に上矢印）をタップ
3. 「ホーム画面に追加」を選択
4. 「追加」をタップ

### Android（Chrome）
1. Chromeでアプリを開く
2. メニュー（3点）をタップ
3. 「ホーム画面に追加」を選択
4. 「追加」をタップ

### デスクトップ（Chrome、Edge）
1. アドレスバー右側のインストールアイコンをクリック
2. 「インストール」をクリック

## 通知を受け取るには

初回アクセス時に通知の許可を求められます。
- **許可する**: 他の人の予定が追加されたときに通知を受け取れます
- **拒否する**: 通知は受け取りませんが、アプリは通常通り使用できます

## バッジAPIサポート状況

| ブラウザ/OS | 通知 | バッジ |
|-----------|-----|-------|
| Android Chrome | ✅ | ✅ |
| Android Edge | ✅ | ✅ |
| iOS Safari | ✅* | ❌ |
| Desktop Chrome | ✅ | ✅ |
| Desktop Edge | ✅ | ✅ |
| Desktop Firefox | ✅ | ❌ |

*iOS Safariでは、ホーム画面に追加したPWAのみ通知が表示されます

## テスト方法

1. アプリを開く
2. 通知の許可を「許可」する
3. 「みんなの予定」タブで「🔔テスト」ボタンをクリック
4. 他の人の予定が追加され、通知が表示される
5. 対応ブラウザでは、アプリアイコンにバッジが表示される
6. 「みんなの予定」タブを開くと、バッジがクリアされる

## 技術仕様

- **Manifest**: `/public/manifest.json`
- **Badging API**: `navigator.setAppBadge(count)`
- **Notifications API**: `new Notification()`
- **ローカルストレージ**: 未読数の永続化
